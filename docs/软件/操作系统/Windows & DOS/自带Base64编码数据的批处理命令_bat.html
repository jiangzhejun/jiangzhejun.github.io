<html>

<head>
  <link rel='stylesheet' href='../../../../inc/code.css'>
  <link rel='stylesheet' href='../../../../inc/default.css'>
  <meta charset="utf-8">
  <title>自带Base64编码数据的批处理命令.bat</title>
</head>

<body>
  <pre class='code'>@<span class='wbk_internal_command'>echo</span> off & <span class='wbk_internal_command'>title</span> %~n0 - bi201903041404
 
<span class='wbk_internal_command'>if</span> exist "%1" (<span class='wbk_internal_command'>cd</span> /d %~dp1) else <span class='wbk_internal_command'>exit</span>
certutil -encode "%~nx1" "%~n1.dat"
 
<span class='wbk_internal_command'>echo</span> <span class='wbk_internal_command'>setlocal</span> enabledelayedexpansion^&<span class='wbk_internal_command'>cd</span> /d %%~dp0&gt;"%~n1.bat"
<span class='wbk_internal_command'>echo</span> <span class='wbk_internal_command'>for</span> /l %%%%x in (1,1,9) do <span class='wbk_internal_command'>set</span> bbid=!bbid!-!random!&gt;&gt;"%~n1.bat"
<span class='wbk_internal_command'>echo</span> <span class='wbk_internal_command'>set</span> bbid=%%temp%%&#92;it&#36;free%%bbid%%%~x1&gt;&gt;"%~n1.bat"
<span class='wbk_internal_command'>echo</span> certutil -decode "%%~n0.bat" %%bbid%%&gt;&gt;"%~n1.bat"
<span class='wbk_internal_command'>echo</span> <span class='wbk_internal_command'>start</span> /wait %%bbid%%&gt;&gt;"%~n1.bat"
<span class='wbk_internal_command'>echo</span> <span class='wbk_internal_command'>del</span> /f/q %%bbid%%&gt;&gt;"%~n1.bat"
<span class='wbk_internal_command'>echo</span> <span class='wbk_internal_command'>exit</span> /b&gt;&gt;"%~n1.bat"
 
<span class='wbk_internal_command'>copy</span> "%~n1.bat"+"%~n1.dat"&<span class='wbk_internal_command'>del</span> "%~n1.dat"
<span class='wbk_internal_command'>call</span> "%~n1.bat"</pre>
</body>

</html>